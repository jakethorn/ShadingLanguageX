<?xml version="1.0"?>
<materialx version="1.39">
  <nodedef name="ND_raycast" node="raycast">
    <output name="out" type="float" default="0.0" />
    <input name="origin" type="vector3" value="0, 0, 0" />
    <input name="view_dir" type="vector3" value="0, 0, 0" />
  </nodedef>
  <nodegraph name="NG_raycast" nodedef="ND_raycast">
    <subtract name="node2" type="vector3">
      <input name="in1" type="vector3" value="0, 0, 0" />
      <input name="in2" type="vector3" interfacename="origin" />
    </subtract>
    <subtract name="node4" type="vector3">
      <input name="in1" type="vector3" nodename="node2" />
      <input name="in2" type="float" value="1" />
    </subtract>
    <divide name="dn" type="vector3">
      <input name="in1" type="vector3" nodename="node4" />
      <input name="in2" type="vector3" interfacename="view_dir" />
    </divide>
    <subtract name="node7" type="vector3">
      <input name="in1" type="vector3" value="0, 0, 0" />
      <input name="in2" type="vector3" interfacename="origin" />
    </subtract>
    <add name="node9" type="vector3">
      <input name="in1" type="vector3" nodename="node7" />
      <input name="in2" type="float" value="1" />
    </add>
    <divide name="dp" type="vector3">
      <input name="in1" type="vector3" nodename="node9" />
      <input name="in2" type="vector3" interfacename="view_dir" />
    </divide>
    <max name="d_min" type="vector3">
      <input name="in1" type="vector3" nodename="dn" />
      <input name="in2" type="vector3" nodename="dp" />
    </max>
    <extract name="node14" type="float">
      <input name="in" type="vector3" nodename="dp" />
      <input name="index" type="integer" value="2" />
    </extract>
    <ifgreater name="node16" type="boolean">
      <input name="value1" type="float" nodename="node14" />
      <input name="value2" type="float" value="0" />
    </ifgreater>
    <extract name="node18" type="float">
      <input name="in" type="vector3" nodename="dp" />
      <input name="index" type="integer" value="2" />
    </extract>
    <ifequal name="d_min_z" type="float">
      <input name="value1" type="boolean" nodename="node16" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="float" nodename="node18" />
      <input name="in2" type="float" value="1e+06" />
    </ifequal>
    <min name="node20" type="float">
      <input name="in1" type="float" nodename="node22" />
      <input name="in2" type="float" nodename="node23" />
    </min>
    <extract name="node22" type="float">
      <input name="in" type="vector3" nodename="d_min" />
      <input name="index" type="integer" value="0" />
    </extract>
    <min name="node23" type="float">
      <input name="in1" type="float" nodename="node25" />
      <input name="in2" type="float" nodename="d_min_z" />
    </min>
    <extract name="node25" type="float">
      <input name="in" type="vector3" nodename="d_min" />
      <input name="index" type="integer" value="1" />
    </extract>
    <output name="out" type="float" nodename="node20" />
  </nodegraph>
  <nodedef name="ND_raycast_midplane" node="raycast_midplane">
    <output name="out" type="float" default="0.0" />
    <input name="origin" type="vector3" value="0, 0, 0" />
    <input name="view_dir" type="vector3" value="0, 0, 0" />
    <input name="depth" type="float" value="0" />
  </nodedef>
  <nodegraph name="NG_raycast_midplane" nodedef="ND_raycast_midplane">
    <extract name="node2" type="float">
      <input name="in" type="vector3" interfacename="origin" />
      <input name="index" type="integer" value="2" />
    </extract>
    <subtract name="node3" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" nodename="node2" />
    </subtract>
    <add name="node5" type="float">
      <input name="in1" type="float" nodename="node3" />
      <input name="in2" type="float" interfacename="depth" />
    </add>
    <extract name="node7" type="float">
      <input name="in" type="vector3" interfacename="view_dir" />
      <input name="index" type="integer" value="2" />
    </extract>
    <divide name="d" type="float">
      <input name="in1" type="float" nodename="node5" />
      <input name="in2" type="float" nodename="node7" />
    </divide>
    <ifgreater name="node10" type="boolean">
      <input name="value1" type="float" nodename="d" />
      <input name="value2" type="float" value="0" />
    </ifgreater>
    <ifequal name="node13" type="float">
      <input name="value1" type="boolean" nodename="node10" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="float" nodename="d" />
      <input name="in2" type="float" value="1e+06" />
    </ifequal>
    <output name="out" type="float" nodename="node13" />
  </nodegraph>
  <nodedef name="ND_main" node="main">
    <output name="out" type="surfaceshader" default="" />
    <input name="wall1_file" type="filename" value="." />
    <input name="ceilg_file" type="filename" value="." />
    <input name="wall2_file" type="filename" value="." />
    <input name="wall3_file" type="filename" value="." />
    <input name="floor_file" type="filename" value="." />
    <input name="table_file" type="filename" value="." />
  </nodedef>
  <nodegraph name="NG_main" nodedef="ND_main">
    <texcoord name="uv" type="vector2" />
    <viewdirection name="node1" type="vector3">
      <input name="space" type="string" value="object" />
    </viewdirection>
    <subtract name="view_dir" type="vector3">
      <input name="in1" type="vector3" value="0, 0, 0" />
      <input name="in2" type="vector3" nodename="node1" />
    </subtract>
    <multiply name="node5" type="vector2">
      <input name="in1" type="vector2" nodename="uv" />
      <input name="in2" type="float" value="2" />
    </multiply>
    <subtract name="node7" type="vector2">
      <input name="in1" type="vector2" nodename="node5" />
      <input name="in2" type="float" value="1" />
    </subtract>
    <extract name="node8" type="float">
      <input name="in" type="vector2" nodename="node7" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node9" type="float">
      <input name="in" type="vector2" nodename="node7" />
      <input name="index" type="integer" value="1" />
    </extract>
    <subtract name="node11" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" value="1" />
    </subtract>
    <combine3 name="origin" type="vector3">
      <input name="in1" type="float" nodename="node8" />
      <input name="in2" type="float" nodename="node9" />
      <input name="in3" type="float" nodename="node11" />
    </combine3>
    <raycast name="room_dist" type="float">
      <input name="origin" type="vector3" nodename="origin" />
      <input name="view_dir" type="vector3" nodename="view_dir" />
    </raycast>
    <multiply name="node17" type="vector3">
      <input name="in1" type="vector3" nodename="view_dir" />
      <input name="in2" type="float" nodename="room_dist" />
    </multiply>
    <add name="room_pos" type="vector3">
      <input name="in1" type="vector3" nodename="origin" />
      <input name="in2" type="vector3" nodename="node17" />
    </add>
    <extract name="node19" type="float">
      <input name="in" type="vector3" nodename="room_pos" />
      <input name="index" type="integer" value="2" />
    </extract>
    <subtract name="node21" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" value="1" />
    </subtract>
    <multiply name="node22" type="float">
      <input name="in1" type="float" nodename="node19" />
      <input name="in2" type="float" nodename="node21" />
    </multiply>
    <extract name="node23" type="float">
      <input name="in" type="vector3" nodename="room_pos" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node24" type="float">
      <input name="in" type="vector3" nodename="room_pos" />
      <input name="index" type="integer" value="1" />
    </extract>
    <extract name="node25" type="float">
      <input name="in" type="vector3" nodename="room_pos" />
      <input name="index" type="integer" value="2" />
    </extract>
    <combine3 name="room_pos2" type="vector3">
      <input name="in1" type="float" nodename="node23" />
      <input name="in2" type="float" nodename="node24" />
      <input name="in3" type="float" nodename="node22" />
    </combine3>
    <add name="node29" type="vector3">
      <input name="in1" type="vector3" nodename="room_pos2" />
      <input name="in2" type="float" value="1" />
    </add>
    <divide name="node31" type="vector3">
      <input name="in1" type="vector3" nodename="node29" />
      <input name="in2" type="float" value="2" />
    </divide>
    <convert name="node32" type="vector3">
      <input name="in" type="float" value="1" />
    </convert>
    <subtract name="wall_uvs" type="vector3">
      <input name="in1" type="vector3" nodename="node32" />
      <input name="in2" type="vector3" nodename="node31" />
    </subtract>
    <extract name="node35" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="0" />
    </extract>
    <ifgreater name="node37" type="boolean">
      <input name="value1" type="float" nodename="node35" />
      <input name="value2" type="float" value="0.99" />
    </ifgreater>
    <image name="node38" type="color4">
      <input name="file" type="filename" interfacename="wall1_file" />
      <input name="texcoord" type="vector2" nodename="node45" />
    </image>
    <extract name="node43" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="2" />
    </extract>
    <extract name="node44" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine2 name="node45" type="vector2">
      <input name="in1" type="float" nodename="node43" />
      <input name="in2" type="float" nodename="node44" />
    </combine2>
    <ifequal name="walls2" type="color4">
      <input name="value1" type="boolean" nodename="node37" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node38" />
      <input name="in2" type="color4" value="0, 0, 0, 0" />
    </ifequal>
    <extract name="node47" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="1" />
    </extract>
    <subtract name="node49" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" value="0.99" />
    </subtract>
    <ifgreatereq name="node50" type="boolean">
      <input name="value1" type="float" nodename="node49" />
      <input name="value2" type="float" nodename="node47" />
    </ifgreatereq>
    <image name="node51" type="color4">
      <input name="file" type="filename" interfacename="ceilg_file" />
      <input name="texcoord" type="vector2" nodename="node60" />
    </image>
    <extract name="node56" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node58" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="2" />
    </extract>
    <subtract name="node59" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" nodename="node58" />
    </subtract>
    <combine2 name="node60" type="vector2">
      <input name="in1" type="float" nodename="node56" />
      <input name="in2" type="float" nodename="node59" />
    </combine2>
    <ifequal name="walls3" type="color4">
      <input name="value1" type="boolean" nodename="node50" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node51" />
      <input name="in2" type="color4" nodename="walls2" />
    </ifequal>
    <extract name="node62" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="0" />
    </extract>
    <subtract name="node64" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" value="0.99" />
    </subtract>
    <ifgreatereq name="node65" type="boolean">
      <input name="value1" type="float" nodename="node64" />
      <input name="value2" type="float" nodename="node62" />
    </ifgreatereq>
    <image name="node66" type="color4">
      <input name="file" type="filename" interfacename="wall2_file" />
      <input name="texcoord" type="vector2" nodename="node75" />
    </image>
    <extract name="node71" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="2" />
    </extract>
    <subtract name="node72" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" nodename="node71" />
    </subtract>
    <extract name="node74" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine2 name="node75" type="vector2">
      <input name="in1" type="float" nodename="node72" />
      <input name="in2" type="float" nodename="node74" />
    </combine2>
    <ifequal name="walls4" type="color4">
      <input name="value1" type="boolean" nodename="node65" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node66" />
      <input name="in2" type="color4" nodename="walls3" />
    </ifequal>
    <extract name="node77" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="2" />
    </extract>
    <subtract name="node79" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" value="0.99" />
    </subtract>
    <ifgreatereq name="node80" type="boolean">
      <input name="value1" type="float" nodename="node79" />
      <input name="value2" type="float" nodename="node77" />
    </ifgreatereq>
    <image name="node81" type="color4">
      <input name="file" type="filename" interfacename="wall3_file" />
      <input name="texcoord" type="vector2" nodename="node88" />
    </image>
    <extract name="node86" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node87" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine2 name="node88" type="vector2">
      <input name="in1" type="float" nodename="node86" />
      <input name="in2" type="float" nodename="node87" />
    </combine2>
    <ifequal name="walls5" type="color4">
      <input name="value1" type="boolean" nodename="node80" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node81" />
      <input name="in2" type="color4" nodename="walls4" />
    </ifequal>
    <extract name="node90" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="1" />
    </extract>
    <ifgreater name="node92" type="boolean">
      <input name="value1" type="float" nodename="node90" />
      <input name="value2" type="float" value="0.99" />
    </ifgreater>
    <image name="node93" type="color4">
      <input name="file" type="filename" interfacename="floor_file" />
      <input name="texcoord" type="vector2" nodename="node100" />
    </image>
    <extract name="node98" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node99" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="2" />
    </extract>
    <combine2 name="node100" type="vector2">
      <input name="in1" type="float" nodename="node98" />
      <input name="in2" type="float" nodename="node99" />
    </combine2>
    <ifequal name="walls6" type="color4">
      <input name="value1" type="boolean" nodename="node92" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node93" />
      <input name="in2" type="color4" nodename="walls5" />
    </ifequal>
    <raycast_midplane name="midplane_dist" type="float">
      <input name="origin" type="vector3" nodename="origin" />
      <input name="view_dir" type="vector3" nodename="view_dir" />
      <input name="depth" type="float" value="0" />
    </raycast_midplane>
    <multiply name="node106" type="vector3">
      <input name="in1" type="vector3" nodename="view_dir" />
      <input name="in2" type="float" nodename="midplane_dist" />
    </multiply>
    <add name="midplane_pos" type="vector3">
      <input name="in1" type="vector3" nodename="origin" />
      <input name="in2" type="vector3" nodename="node106" />
    </add>
    <extract name="node108" type="float">
      <input name="in" type="vector3" nodename="midplane_pos" />
      <input name="index" type="integer" value="1" />
    </extract>
    <subtract name="node110" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" value="1" />
    </subtract>
    <multiply name="node111" type="float">
      <input name="in1" type="float" nodename="node108" />
      <input name="in2" type="float" nodename="node110" />
    </multiply>
    <extract name="node112" type="float">
      <input name="in" type="vector3" nodename="midplane_pos" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node113" type="float">
      <input name="in" type="vector3" nodename="midplane_pos" />
      <input name="index" type="integer" value="1" />
    </extract>
    <extract name="node114" type="float">
      <input name="in" type="vector3" nodename="midplane_pos" />
      <input name="index" type="integer" value="2" />
    </extract>
    <combine3 name="midplane_pos2" type="vector3">
      <input name="in1" type="float" nodename="node112" />
      <input name="in2" type="float" nodename="node111" />
      <input name="in3" type="float" nodename="node114" />
    </combine3>
    <image name="table" type="color4">
      <input name="file" type="filename" interfacename="table_file" />
      <input name="texcoord" type="vector2" nodename="node127" />
    </image>
    <extract name="node121" type="float">
      <input name="in" type="vector3" nodename="midplane_pos2" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node122" type="float">
      <input name="in" type="vector3" nodename="midplane_pos2" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine2 name="node123" type="vector2">
      <input name="in1" type="float" nodename="node121" />
      <input name="in2" type="float" nodename="node122" />
    </combine2>
    <add name="node125" type="vector2">
      <input name="in1" type="vector2" nodename="node123" />
      <input name="in2" type="float" value="1" />
    </add>
    <divide name="node127" type="vector2">
      <input name="in1" type="vector2" nodename="node125" />
      <input name="in2" type="float" value="2" />
    </divide>
    <extract name="node118" type="float">
      <input name="in" type="color4" nodename="table" />
      <input name="index" type="integer" value="2" />
    </extract>
    <ifgreatereq name="node128" type="boolean">
      <input name="value1" type="float" value="0.25" />
      <input name="value2" type="float" nodename="node118" />
    </ifgreatereq>
    <ifequal name="room2" type="color4">
      <input name="value1" type="boolean" nodename="node128" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="table" />
      <input name="in2" type="color4" nodename="walls6" />
    </ifequal>
    <ifgreatereq name="node133" type="boolean">
      <input name="value1" type="float" nodename="room_dist" />
      <input name="value2" type="float" nodename="midplane_dist" />
    </ifgreatereq>
    <ifequal name="room3" type="color4">
      <input name="value1" type="boolean" nodename="node133" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="room2" />
      <input name="in2" type="color4" nodename="walls6" />
    </ifequal>
    <standard_surface name="surface" type="surfaceshader">
      <input name="base_color" type="color3" nodename="node140" />
      <input name="specular_roughness" type="float" value="1" />
    </standard_surface>
    <extract name="node137" type="float">
      <input name="in" type="color4" nodename="room3" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node138" type="float">
      <input name="in" type="color4" nodename="room3" />
      <input name="index" type="integer" value="1" />
    </extract>
    <extract name="node139" type="float">
      <input name="in" type="color4" nodename="room3" />
      <input name="index" type="integer" value="2" />
    </extract>
    <combine3 name="node140" type="color3">
      <input name="in1" type="float" nodename="node137" />
      <input name="in2" type="float" nodename="node138" />
      <input name="in3" type="float" nodename="node139" />
    </combine3>
    <output name="out" type="surfaceshader" nodename="surface" />
  </nodegraph>
  <main name="node1" type="surfaceshader">
    <input name="wall1_file" type="filename" value="C:\Users\jaket\Pictures\left_wall_2.jpg" />
    <input name="ceilg_file" type="filename" value="C:\Users\jaket\Pictures\ceiling_2.jpg" />
    <input name="wall2_file" type="filename" value="C:\Users\jaket\Pictures\right_wall_2.jpg" />
    <input name="wall3_file" type="filename" value="C:\Users\jaket\Pictures\back_wall_2.jpg" />
    <input name="floor_file" type="filename" value="C:\Users\jaket\Pictures\floor_2.jpg" />
    <input name="table_file" type="filename" value="C:\Users\jaket\Pictures\table_scaled.jpg" />
  </main>
</materialx>
