<?xml version="1.0"?>
<materialx version="1.39">
  <nodedef name="ND_raycast" node="raycast">
    <output name="out" type="float" default="0.0" />
    <input name="origin" type="vector3" value="0, 0, 0" />
    <input name="view_dir" type="vector3" value="0, 0, 0" />
  </nodedef>
  <nodegraph name="NG_raycast" nodedef="ND_raycast">
    <subtract name="node2" type="vector3">
      <input name="in1" type="vector3" value="0, 0, 0" />
      <input name="in2" type="vector3" interfacename="origin" />
    </subtract>
    <subtract name="node4" type="vector3">
      <input name="in1" type="vector3" nodename="node2" />
      <input name="in2" type="float" value="1" />
    </subtract>
    <divide name="dn" type="vector3">
      <input name="in1" type="vector3" nodename="node4" />
      <input name="in2" type="vector3" interfacename="view_dir" />
    </divide>
    <subtract name="node7" type="vector3">
      <input name="in1" type="vector3" value="0, 0, 0" />
      <input name="in2" type="vector3" interfacename="origin" />
    </subtract>
    <add name="node9" type="vector3">
      <input name="in1" type="vector3" nodename="node7" />
      <input name="in2" type="float" value="1" />
    </add>
    <divide name="dp" type="vector3">
      <input name="in1" type="vector3" nodename="node9" />
      <input name="in2" type="vector3" interfacename="view_dir" />
    </divide>
    <max name="d_min" type="vector3">
      <input name="in1" type="vector3" nodename="dn" />
      <input name="in2" type="vector3" nodename="dp" />
    </max>
    <extract name="node14" type="float">
      <input name="in" type="vector3" nodename="dp" />
      <input name="index" type="integer" value="2" />
    </extract>
    <ifgreater name="node16" type="boolean">
      <input name="value1" type="float" nodename="node14" />
      <input name="value2" type="float" value="0" />
    </ifgreater>
    <extract name="node18" type="float">
      <input name="in" type="vector3" nodename="dp" />
      <input name="index" type="integer" value="2" />
    </extract>
    <ifequal name="d_min_z" type="float">
      <input name="value1" type="boolean" nodename="node16" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="float" nodename="node18" />
      <input name="in2" type="float" value="1e+06" />
    </ifequal>
    <extract name="in1" type="float">
      <input name="in" type="vector3" nodename="d_min" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="in2" type="float">
      <input name="in" type="vector3" nodename="d_min" />
      <input name="index" type="integer" value="1" />
    </extract>
    <min name="node25" type="float">
      <input name="in1" type="float" nodename="in2" />
      <input name="in2" type="float" nodename="d_min_z" />
    </min>
    <min name="node26" type="float">
      <input name="in1" type="float" nodename="in1" />
      <input name="in2" type="float" nodename="node25" />
    </min>
    <output name="out" type="float" nodename="node26" />
  </nodegraph>
  <nodedef name="ND_raycast_midplane" node="raycast_midplane">
    <output name="out" type="float" default="0.0" />
    <input name="origin" type="vector3" value="0, 0, 0" />
    <input name="view_dir" type="vector3" value="0, 0, 0" />
    <input name="depth" type="float" value="0" />
  </nodedef>
  <nodegraph name="NG_raycast_midplane" nodedef="ND_raycast_midplane">
    <extract name="node2" type="float">
      <input name="in" type="vector3" interfacename="origin" />
      <input name="index" type="integer" value="2" />
    </extract>
    <subtract name="node3" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" nodename="node2" />
    </subtract>
    <add name="node5" type="float">
      <input name="in1" type="float" nodename="node3" />
      <input name="in2" type="float" interfacename="depth" />
    </add>
    <extract name="node7" type="float">
      <input name="in" type="vector3" interfacename="view_dir" />
      <input name="index" type="integer" value="2" />
    </extract>
    <divide name="d" type="float">
      <input name="in1" type="float" nodename="node5" />
      <input name="in2" type="float" nodename="node7" />
    </divide>
    <ifgreater name="node10" type="boolean">
      <input name="value1" type="float" nodename="d" />
      <input name="value2" type="float" value="0" />
    </ifgreater>
    <ifequal name="node13" type="float">
      <input name="value1" type="boolean" nodename="node10" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="float" nodename="d" />
      <input name="in2" type="float" value="1e+06" />
    </ifequal>
    <output name="out" type="float" nodename="node13" />
  </nodegraph>
  <nodedef name="ND_main" node="main">
    <output name="out" type="surfaceshader" default="" />
    <input name="wall1_file" type="filename" value="" />
    <input name="ceilg_file" type="filename" value="" />
    <input name="wall2_file" type="filename" value="" />
    <input name="wall3_file" type="filename" value="" />
    <input name="floor_file" type="filename" value="" />
    <input name="table_file" type="filename" value="" />
  </nodedef>
  <nodegraph name="NG_main" nodedef="ND_main">
    <texcoord name="uv" type="vector2" />
    <viewdirection name="node2" type="vector3">
      <input name="space" type="string" value="object" />
    </viewdirection>
    <subtract name="view_dir" type="vector3">
      <input name="in1" type="vector3" value="0, 0, 0" />
      <input name="in2" type="vector3" nodename="node2" />
    </subtract>
    <multiply name="node5" type="vector2">
      <input name="in1" type="vector2" nodename="uv" />
      <input name="in2" type="float" value="2" />
    </multiply>
    <subtract name="node7" type="vector2">
      <input name="in1" type="vector2" nodename="node5" />
      <input name="in2" type="float" value="1" />
    </subtract>
    <extract name="node8" type="float">
      <input name="in" type="vector2" nodename="node7" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node9" type="float">
      <input name="in" type="vector2" nodename="node7" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine3 name="origin" type="vector3">
      <input name="in1" type="float" nodename="node8" />
      <input name="in2" type="float" nodename="node9" />
      <input name="in3" type="float" value="-1" />
    </combine3>
    <raycast name="room_dist" type="float">
      <input name="origin" type="vector3" nodename="origin" />
      <input name="view_dir" type="vector3" nodename="view_dir" />
    </raycast>
    <multiply name="node16" type="vector3">
      <input name="in1" type="vector3" nodename="view_dir" />
      <input name="in2" type="float" nodename="room_dist" />
    </multiply>
    <add name="room_pos" type="vector3">
      <input name="in1" type="vector3" nodename="origin" />
      <input name="in2" type="vector3" nodename="node16" />
    </add>
    <extract name="node18" type="float">
      <input name="in" type="vector3" nodename="room_pos" />
      <input name="index" type="integer" value="2" />
    </extract>
    <multiply name="node20" type="float">
      <input name="in1" type="float" nodename="node18" />
      <input name="in2" type="float" value="-1" />
    </multiply>
    <extract name="node21" type="float">
      <input name="in" type="vector3" nodename="room_pos" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node22" type="float">
      <input name="in" type="vector3" nodename="room_pos" />
      <input name="index" type="integer" value="1" />
    </extract>
    <extract name="node23" type="float">
      <input name="in" type="vector3" nodename="room_pos" />
      <input name="index" type="integer" value="2" />
    </extract>
    <combine3 name="room_pos2" type="vector3">
      <input name="in1" type="float" nodename="node21" />
      <input name="in2" type="float" nodename="node22" />
      <input name="in3" type="float" nodename="node20" />
    </combine3>
    <add name="node27" type="vector3">
      <input name="in1" type="vector3" nodename="room_pos2" />
      <input name="in2" type="float" value="1" />
    </add>
    <divide name="in2" type="vector3">
      <input name="in1" type="vector3" nodename="node27" />
      <input name="in2" type="float" value="2" />
    </divide>
    <subtract name="wall_uvs" type="vector3">
      <input name="in1" type="vector3" value="1, 1, 1" />
      <input name="in2" type="vector3" nodename="in2" />
    </subtract>
    <extract name="node32" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="0" />
    </extract>
    <ifgreater name="node34" type="boolean">
      <input name="value1" type="float" nodename="node32" />
      <input name="value2" type="float" value="0.99" />
    </ifgreater>
    <extract name="node39" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="2" />
    </extract>
    <extract name="node40" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine2 name="node41" type="vector2">
      <input name="in1" type="float" nodename="node39" />
      <input name="in2" type="float" nodename="node40" />
    </combine2>
    <image name="node48" type="color4">
      <input name="file" type="filename" interfacename="wall1_file" />
      <input name="texcoord" type="vector2" nodename="node41" />
    </image>
    <ifequal name="walls2" type="color4">
      <input name="value1" type="boolean" nodename="node34" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node48" />
      <input name="in2" type="color4" value="0, 0, 0, 0" />
    </ifequal>
    <extract name="node43" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="1" />
    </extract>
    <ifgreatereq name="node45" type="boolean">
      <input name="value1" type="float" nodename="node43" />
      <input name="value2" type="float" value="-0.99" />
    </ifgreatereq>
    <not name="node46" type="boolean">
      <input name="in" type="boolean" nodename="node45" />
    </not>
    <extract name="node52" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node54" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="2" />
    </extract>
    <subtract name="node55" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" nodename="node54" />
    </subtract>
    <combine2 name="node56" type="vector2">
      <input name="in1" type="float" nodename="node52" />
      <input name="in2" type="float" nodename="node55" />
    </combine2>
    <image name="node63" type="color4">
      <input name="file" type="filename" interfacename="ceilg_file" />
      <input name="texcoord" type="vector2" nodename="node56" />
    </image>
    <ifequal name="walls3" type="color4">
      <input name="value1" type="boolean" nodename="node46" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node63" />
      <input name="in2" type="color4" nodename="walls2" />
    </ifequal>
    <extract name="node58" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="0" />
    </extract>
    <ifgreatereq name="node60" type="boolean">
      <input name="value1" type="float" nodename="node58" />
      <input name="value2" type="float" value="-0.99" />
    </ifgreatereq>
    <not name="node61" type="boolean">
      <input name="in" type="boolean" nodename="node60" />
    </not>
    <extract name="node67" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="2" />
    </extract>
    <subtract name="node68" type="float">
      <input name="in1" type="float" value="0" />
      <input name="in2" type="float" nodename="node67" />
    </subtract>
    <extract name="node70" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine2 name="node71" type="vector2">
      <input name="in1" type="float" nodename="node68" />
      <input name="in2" type="float" nodename="node70" />
    </combine2>
    <image name="node78" type="color4">
      <input name="file" type="filename" interfacename="wall2_file" />
      <input name="texcoord" type="vector2" nodename="node71" />
    </image>
    <ifequal name="walls4" type="color4">
      <input name="value1" type="boolean" nodename="node61" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node78" />
      <input name="in2" type="color4" nodename="walls3" />
    </ifequal>
    <extract name="node73" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="2" />
    </extract>
    <ifgreatereq name="node75" type="boolean">
      <input name="value1" type="float" nodename="node73" />
      <input name="value2" type="float" value="-0.99" />
    </ifgreatereq>
    <not name="node76" type="boolean">
      <input name="in" type="boolean" nodename="node75" />
    </not>
    <extract name="node82" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node83" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine2 name="node84" type="vector2">
      <input name="in1" type="float" nodename="node82" />
      <input name="in2" type="float" nodename="node83" />
    </combine2>
    <image name="node91" type="color4">
      <input name="file" type="filename" interfacename="wall3_file" />
      <input name="texcoord" type="vector2" nodename="node84" />
    </image>
    <ifequal name="walls5" type="color4">
      <input name="value1" type="boolean" nodename="node76" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node91" />
      <input name="in2" type="color4" nodename="walls4" />
    </ifequal>
    <extract name="node86" type="float">
      <input name="in" type="vector3" nodename="room_pos2" />
      <input name="index" type="integer" value="1" />
    </extract>
    <ifgreater name="node88" type="boolean">
      <input name="value1" type="float" nodename="node86" />
      <input name="value2" type="float" value="0.99" />
    </ifgreater>
    <extract name="node94" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node95" type="float">
      <input name="in" type="vector3" nodename="wall_uvs" />
      <input name="index" type="integer" value="2" />
    </extract>
    <combine2 name="node96" type="vector2">
      <input name="in1" type="float" nodename="node94" />
      <input name="in2" type="float" nodename="node95" />
    </combine2>
    <image name="node103" type="color4">
      <input name="file" type="filename" interfacename="floor_file" />
      <input name="texcoord" type="vector2" nodename="node96" />
    </image>
    <ifequal name="walls6" type="color4">
      <input name="value1" type="boolean" nodename="node88" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="node103" />
      <input name="in2" type="color4" nodename="walls5" />
    </ifequal>
    <raycast_midplane name="midplane_dist" type="float">
      <input name="origin" type="vector3" nodename="origin" />
      <input name="view_dir" type="vector3" nodename="view_dir" />
      <input name="depth" type="float" value="0" />
    </raycast_midplane>
    <multiply name="node102" type="vector3">
      <input name="in1" type="vector3" nodename="view_dir" />
      <input name="in2" type="float" nodename="midplane_dist" />
    </multiply>
    <add name="midplane_pos" type="vector3">
      <input name="in1" type="vector3" nodename="origin" />
      <input name="in2" type="vector3" nodename="node102" />
    </add>
    <extract name="node105" type="float">
      <input name="in" type="vector3" nodename="midplane_pos" />
      <input name="index" type="integer" value="1" />
    </extract>
    <multiply name="node107" type="float">
      <input name="in1" type="float" nodename="node105" />
      <input name="in2" type="float" value="-1" />
    </multiply>
    <extract name="node108" type="float">
      <input name="in" type="vector3" nodename="midplane_pos" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node109" type="float">
      <input name="in" type="vector3" nodename="midplane_pos" />
      <input name="index" type="integer" value="1" />
    </extract>
    <extract name="node110" type="float">
      <input name="in" type="vector3" nodename="midplane_pos" />
      <input name="index" type="integer" value="2" />
    </extract>
    <combine3 name="midplane_pos2" type="vector3">
      <input name="in1" type="float" nodename="node108" />
      <input name="in2" type="float" nodename="node107" />
      <input name="in3" type="float" nodename="node110" />
    </combine3>
    <extract name="node116" type="float">
      <input name="in" type="vector3" nodename="midplane_pos2" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node117" type="float">
      <input name="in" type="vector3" nodename="midplane_pos2" />
      <input name="index" type="integer" value="1" />
    </extract>
    <combine2 name="node118" type="vector2">
      <input name="in1" type="float" nodename="node116" />
      <input name="in2" type="float" nodename="node117" />
    </combine2>
    <add name="node120" type="vector2">
      <input name="in1" type="vector2" nodename="node118" />
      <input name="in2" type="float" value="1" />
    </add>
    <divide name="node122" type="vector2">
      <input name="in1" type="vector2" nodename="node120" />
      <input name="in2" type="float" value="2" />
    </divide>
    <image name="table" type="color4">
      <input name="file" type="filename" interfacename="table_file" />
      <input name="texcoord" type="vector2" nodename="node122" />
    </image>
    <extract name="node114" type="float">
      <input name="in" type="color4" nodename="table" />
      <input name="index" type="integer" value="2" />
    </extract>
    <ifgreatereq name="node124" type="boolean">
      <input name="value1" type="float" nodename="node114" />
      <input name="value2" type="float" value="0.25" />
    </ifgreatereq>
    <not name="node125" type="boolean">
      <input name="in" type="boolean" nodename="node124" />
    </not>
    <ifequal name="room2" type="color4">
      <input name="value1" type="boolean" nodename="node125" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="table" />
      <input name="in2" type="color4" nodename="walls6" />
    </ifequal>
    <ifgreatereq name="node130" type="boolean">
      <input name="value1" type="float" nodename="midplane_dist" />
      <input name="value2" type="float" nodename="room_dist" />
    </ifgreatereq>
    <not name="node131" type="boolean">
      <input name="in" type="boolean" nodename="node130" />
    </not>
    <ifequal name="room3" type="color4">
      <input name="value1" type="boolean" nodename="node131" />
      <input name="value2" type="boolean" value="true" />
      <input name="in1" type="color4" nodename="room2" />
      <input name="in2" type="color4" nodename="walls6" />
    </ifequal>
    <standard_surface name="surface" type="surfaceshader">
      <input name="base_color" type="color3" nodename="node138" />
      <input name="specular_roughness" type="float" value="1" />
    </standard_surface>
    <extract name="node135" type="float">
      <input name="in" type="color4" nodename="room3" />
      <input name="index" type="integer" value="0" />
    </extract>
    <extract name="node136" type="float">
      <input name="in" type="color4" nodename="room3" />
      <input name="index" type="integer" value="1" />
    </extract>
    <extract name="node137" type="float">
      <input name="in" type="color4" nodename="room3" />
      <input name="index" type="integer" value="2" />
    </extract>
    <combine3 name="node138" type="color3">
      <input name="in1" type="float" nodename="node135" />
      <input name="in2" type="float" nodename="node136" />
      <input name="in3" type="float" nodename="node137" />
    </combine3>
    <output name="out" type="surfaceshader" nodename="surface" />
  </nodegraph>
  <main name="node1" type="surfaceshader">
    <input name="wall1_file" type="filename" value="C:\Users\jaket\Pictures\left_wall_2.jpg" />
    <input name="ceilg_file" type="filename" value="C:\Users\jaket\Pictures\ceiling_2.jpg" />
    <input name="wall2_file" type="filename" value="C:\Users\jaket\Pictures\right_wall_2.jpg" />
    <input name="wall3_file" type="filename" value="C:\Users\jaket\Pictures\back_wall_2.jpg" />
    <input name="floor_file" type="filename" value="C:\Users\jaket\Pictures\floor_2.jpg" />
    <input name="table_file" type="filename" value="C:\Users\jaket\Pictures\table_scaled.jpg" />
  </main>
</materialx>
